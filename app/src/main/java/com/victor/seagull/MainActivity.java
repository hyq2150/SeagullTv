package com.victor.seagull;import android.content.pm.ActivityInfo;import android.content.res.Configuration;import android.graphics.Color;import android.os.Build;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.os.PersistableBundle;import android.support.annotation.ColorInt;import android.support.annotation.NonNull;import android.support.v4.app.Fragment;import android.util.Log;import android.view.Gravity;import android.view.KeyEvent;import android.view.MotionEvent;import android.view.SurfaceView;import android.view.View;import android.view.ViewGroup;import android.widget.FrameLayout;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.RelativeLayout;import android.widget.TextView;import com.afollestad.materialdialogs.MaterialDialog;import com.afollestad.materialdialogs.color.ColorChooserDialog;import com.bumptech.glide.Glide;import com.mikepenz.foundation_icons_typeface_library.FoundationIcons;import com.mikepenz.iconics.IconicsDrawable;import com.mikepenz.material_design_iconic_typeface_library.MaterialDesignIconic;import com.victor.fragment.ColorFragment;import com.victor.fragment.ProgramFragment;import com.victor.module.Player;import com.victor.util.Constant;import com.victor.util.SystemUtils;import com.victor.util.ThemeUtils;import com.victor.view.ColorRelativeLayout;import com.victor.view.ColorView;import com.victor.view.PlayLayout;import com.victor.view.ResideLayout;import butterknife.Bind;import butterknife.ButterKnife;import butterknife.OnClick;import jp.wasabeef.glide.transformations.CropCircleTransformation;public class MainActivity extends BaseActivity implements ColorChooserDialog.ColorCallback {    private String TAG = "MainActivity";    private View view;    @Bind(R.id.avatar)    ImageView avatar;    @Bind(R.id.desc)    TextView desc;    @Bind(R.id.top_menu)    LinearLayout topMenu;    @Bind(R.id.all)    TextView all;    @Bind(R.id.fuli)    TextView fuli;    @Bind(R.id.android)    TextView android;    @Bind(R.id.ios)    TextView ios;    @Bind(R.id.ll_about)    LinearLayout llAbout;    @Bind(R.id.ll_theme)    LinearLayout llTheme;    @Bind(R.id.bottom_menu)    LinearLayout bottomMenu;    @Bind(R.id.menu)    ColorRelativeLayout menu;    @Bind(R.id.status_bar)    ColorView statusBar;    @Bind(R.id.icon)    ImageView icon;    @Bind(R.id.title)    TextView title;    @Bind(R.id.container)    FrameLayout container;    @Bind(R.id.resideLayout)    ResideLayout resideLayout;    private Fragment currentFragment;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        view = getLayoutInflater().from(this).inflate(R.layout.activity_main,null);        setContentView(view);        ButterKnife.bind(this);        initialize();    }    private void initialize() {        ButterKnife.bind(this);        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {            statusBar.setVisibility(View.VISIBLE);            statusBar.getLayoutParams().height = SystemUtils.getStatusHeight(this);            statusBar.setLayoutParams(statusBar.getLayoutParams());        } else {            statusBar.setVisibility(View.GONE);        }        Glide.with(MainActivity.this).load(R.mipmap.default_img)                .placeholder(new IconicsDrawable(this)                        .icon(FoundationIcons.Icon.fou_photo)                        .color(Color.GRAY)                        .backgroundColor(Color.WHITE)                        .roundedCornersDp(40)                        .paddingDp(15)                        .sizeDp(75))                .bitmapTransform(new CropCircleTransformation(this))                .dontAnimate()                .into(avatar);        icon.setImageDrawable(new IconicsDrawable(this).color(Color.WHITE).icon(MaterialDesignIconic.Icon.gmi_view_comfy).sizeDp(20));        title.setText("从你的全世界路过");        switchFragment(new ProgramFragment());    }    private void switchFragment(Fragment fragment) {        if (currentFragment == null || !fragment.getClass().getName().equals(currentFragment.getClass().getName())) {            getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();            currentFragment = fragment;        }    }    @OnClick({R.id.avatar, R.id.all, R.id.fuli, R.id.android,            R.id.ios, R.id.ll_about, R.id.ll_theme, R.id.icon})    public void onClick(View view) {        switch (view.getId()) {            case R.id.avatar:                resideLayout.closePane();                break;            case R.id.all:                resideLayout.closePane();                icon.setImageDrawable(new IconicsDrawable(this).color(Color.WHITE).icon(MaterialDesignIconic.Icon.gmi_view_comfy).sizeDp(20));                title.setText("从你的全世界路过");                break;            case R.id.fuli:                resideLayout.closePane();                icon.setImageDrawable(new IconicsDrawable(this).color(Color.WHITE).icon(MaterialDesignIconic.Icon.gmi_mood).sizeDp(20));                title.setText(R.string.fuli);                switchFragment(new ColorFragment());                break;            case R.id.android:                resideLayout.closePane();                icon.setImageDrawable(new IconicsDrawable(this).color(Color.WHITE).icon(MaterialDesignIconic.Icon.gmi_android).sizeDp(20));                title.setText(R.string.android);                break;            case R.id.ios:                resideLayout.closePane();                icon.setImageDrawable(new IconicsDrawable(this).color(Color.WHITE).icon(MaterialDesignIconic.Icon.gmi_apple).sizeDp(20));                title.setText(R.string.ios);                break;            case R.id.ll_about:                new MaterialDialog.Builder(this)                        .title(R.string.about)                        .icon(new IconicsDrawable(this)                                .color(ThemeUtils.getThemeColor(this, R.attr.colorPrimary))                                .icon(MaterialDesignIconic.Icon.gmi_account)                                .sizeDp(20))                        .content(R.string.about_me)                        .positiveText(R.string.close)                        .show();                break;            case R.id.ll_theme:                new ColorChooserDialog.Builder(this, R.string.theme)                        .customColors(R.array.colors, null)                        .doneButton(R.string.done)                        .cancelButton(R.string.cancel)                        .allowUserColorInput(false)                        .allowUserColorInputAlpha(false)                        .show();                break;            case R.id.icon:                resideLayout.openPane();                break;        }    }    @Override    public void onColorSelection(@NonNull ColorChooserDialog dialog, @ColorInt int selectedColor) {        ThemeUtils.setTheme(this,selectedColor);    }    @Override    public boolean onKeyDown(int keyCode, KeyEvent event) {        return super.onKeyDown(keyCode, event);    }}