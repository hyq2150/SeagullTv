package com.victor.module;import android.content.Context;import android.os.Bundle;import android.os.Handler;import android.os.HandlerThread;import android.os.Message;import com.victor.util.Constant;import com.victor.util.HttpActions;import java.util.HashMap;/** * Created by victor on 2016/1/21. */public class HttpRequestHelper {    private String TAG = "HttpRequestHelper";    private Context mContext;    private Handler mRequestHandler;    private HandlerThread mRequestHandlerThread;    public HttpRequestHelper (Context context) {        mContext = context;        startRequestTask ();    }    private void startRequestTask (){        mRequestHandlerThread = new HandlerThread("HttpRequestTask");        mRequestHandlerThread.start();        mRequestHandler = new Handler(mRequestHandlerThread.getLooper()){            @Override            public void handleMessage(Message msg) {                switch (msg.what) {//                    case Constant.Msg.PICTURE_REQUEST://                        HashMap<Integer,Object> picMap = (HashMap<Integer, Object>) msg.obj;//                        String picUrl = (String) picMap.get(Constant.Msg.PICTURE_REQUEST);//                        HttpActions.requestPictureAction(picUrl, mContext);//                        break;                    case Constant.Msg.MEIPAI_REQUEST:                        HashMap<Integer,Object> meiPaiMap = (HashMap<Integer, Object>) msg.obj;                        Bundle meiPaiBundle = (Bundle) meiPaiMap.get(Constant.Msg.MEIPAI_REQUEST);                        HttpActions.requestMeiPaiAction(mContext,meiPaiBundle);                        break;                    case Constant.Msg.REQUEST_LIVE_EPG:                        HashMap<Integer,Object> epgMap = (HashMap<Integer, Object>) msg.obj;                        String epg = (String) epgMap.get(Constant.Msg.REQUEST_LIVE_EPG);                        HttpActions.requestLiveEpgAction(mContext,epg);                        break;                    case Constant.Msg.CATEGORY_REQUEST:                        HttpActions.requestCategoryAction(mContext);                        break;                }            }        };    }    public void sendRequestWithParms (int Msg,Object requestData) {        HashMap<Integer, Object> requestMap = new HashMap<Integer, Object>();        requestMap.put(Msg, requestData);        Message msg = mRequestHandler.obtainMessage(Msg,requestMap);        mRequestHandler.sendMessage(msg);    }    public void sendRequest (int msg) {        mRequestHandler.sendEmptyMessage(msg);    }    public void onDestroy (){        if (mRequestHandlerThread != null) {            mRequestHandlerThread.quit();            mRequestHandlerThread = null;        }    }}